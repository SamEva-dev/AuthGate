# Dans Program.cs, après AddDefaultTokenProviders(), ajouter:

.AddSignInManager<SignInManager<User>>()

# Ligne complète devrait être:
services
    .AddIdentityCore<User>(options => { /* ... */ })
    .AddRoles<Role>()
    .AddEntityFrameworkStores<AuthDbContext>()
    .AddDefaultTokenProviders()
    .AddSignInManager<SignInManager<User>>();  // <-- AJOUTER CETTE LIGNE
